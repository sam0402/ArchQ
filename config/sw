#!/bin/sh
#serv=$(echo $0 | awk -F/ '{print $NF}')
serv=$1
service=$serv
case $1 in
	airplay)
		serv=shairport-sync
		service="shairport-sync"
		;;
	airplay2)
		serv=shairport-sync
		service="shairport-sync nqptp"
		;;
	roon)
		serv=roonserver
		service=roonserver
		;;
	mpd)
		serv=mpd
		service="mpd"
		;;
	airmpd)
		serv="--user pipewire"
		service="--user pipewire pipewire-pulse sinkdef"
		;;
	rompr)
		serv=mpd
		service="mpd nginx php-fpm avahi-daemon avahi-daemon.socket"
		;;
	lms)
		serv=logitechmediaserver
		service="logitechmediaserver squeezelite"
		;;
esac

if echo $serv | grep -q 'user'; then
	[ $(systemctl is-active $serv) == active ] && systemctl stop $service || systemctl start $service
else
	[ $(systemctl is-active $serv) == active ] && sudo systemctl stop $service || sudo systemctl start $service
fi
echo Service $service is $(systemctl is-active $serv).
